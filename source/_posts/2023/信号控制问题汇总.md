---
title:
---



# 信号控制问题汇总

1. 用户权限问题，项目没有分外部路由和内部路由，会导致鉴权不易拆分
2. 业务复杂 逻辑不清晰 ，中间件使用不合理 新旧需求混杂，缺乏注释，文档
3. 链路问题  
3.1 前端 nginx 包含前端路由和后端路由，前端路由合理，后端路由可以省去，重构方案可以再加一层路由
3.2 traffic 使用不合理，traffic 应该区分业务线 不应区分模块， 可将请求区分为 北斗二期业务线，云控平台业务线等 然后流量统一打到各个业务线的网关，由网关统一分发到各个微服务，微服务间共享应使用服务注册发现（nacos）protocal 协议调用更快捷另外可加熔断，重试，限流策略。
4. 项目无基础后端服务框架，比如 统一异常处理，监控，链路追踪， 等
5. 信控平台后端 拆分，梳理依赖，云控相关的统一部署k8s 云环境，便于统一管控
6. 信号优化 以及信号控制 公共部分抽离，做到信号优化彻底与信控解耦 ，模块可独立部署
7. 对接第三方组件 （比如 信号机）应抽离公共模块 提供 规范api 包括文档，做到通用化
8. 业务合理归属， 将从属信控从属优化的分别到各自的项目中。 数据做到合理拆分，（静态数据从系统配置来，优化方案相关从信号优化，控制特有从属信号控制，下发从属下发模块）
9. 开发规范严格按照阿里开发文档规范。 数据库设计，接口设计，代码分层设计，命名规则，等
10. 新旧需求叠加开发，废弃需求的代码依然在正常需求的代码中夹杂在跑，维护困难。
11. 需求设计不合理，条理混乱，1）在改问题时在未定位到根本问题时随意在问题处追加补丁代码，不考虑设计的合理性 2）查询接口混杂着非本接口业务的插入操作。 3）不合理运用内存缓存 以及过渡使用redis 总线 
12. 业务缺少事务性，功能设计不全无完整闭环，导致时间久了以后，出现多处复杂混乱的脏数据，无法定位。
13. 功能缺乏复用性，导致相同功能方法存在多处，时间久了以后，方法功能有修改，却修改不全，造成隐蔽bug。
14. 业务分层不明确，需求写在各个分层处，定位问题困难。
15. 数据库表缺少注释，不知道字段含义
16. 数据库表字段废弃 依然保留，同一个功能 设计了多个表多个字段，定位问题困难
17. 内存存储 未做持久化，内存存储结构 无文档，无从排查问题
18. redis 缓存 结构和文档未保持完全一致，有的大部分无说明无文档，存在脏字段，脏数据。
19. 第三方模块对接 没有做好封装，分散在业务代码里各个位置，无法后期整体维护，架构混乱
20. redis 推送消息解耦业务后，用sleep方式等待  用来判断其他业务执行完


讨论遇到的问题汇总
1. 信号优化与信号控制功能划分边界的问题
2. 信号控制 新老需求拆分的问题。
讨论点1： 老需求功能设计谁了解？ 代码设计 ，使用RestAPI 还是 消息队列，数据持久化方式是内存还是缓存 还是数据库 ，数据库选型，技术选型 等 是否由后端负责人负责。
讨论点2： 新加需求需求分析与设计，功能拆分，交互方式，使用技术栈，完成产品设计到代码设计的初步框架，以及考虑到新老版本的兼容以及功能后期的扩展，是否由后端负责人负责。
讨论点3： 组件功能是否需要多人开发，工作量拆分，多人分担开发内容
讨论点4： 孟康可以分担组件开发工作量，甚至负责其中的某些组件。
讨论点5： 业务开发完后，谁来把控这块业务以及功能。
讨论点6： java-server服务是否正常运行谁来负责，signal_optimize_control 服务 谁来负责
讨论点7： 组件开发方式 1） 由一人负责以及开发 2）由一人设计以及拆分工作量，多人进行开发 3）组件按人划分负责人。
讨论点8： 开发规范谁来指定。 1） 模块负责人指定 2）按各自开发习惯 3） 按项目原有风格
讨论点9： 工作量拆分由谁来做。
讨论点10： 工作量拆分 按平均原则。
讨论点11：后期的业务维护 谁来做